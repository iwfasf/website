_m({'用户名(圈内名)':'Username',登录:'Sign In',注册:'Sign Up','请求已发送，请检查您的邮箱':'We have sent you an email to reset your password. Please check your mailbox.',邮箱地址错误:'The email address is incorrect',发送失败:'Failed to send an email.',邮箱:'Email',密码:'Password','忘记密码？':'Forget password?',字符:'characters','注册成功！':'Sign up successfully! ',该用户名已被注册:'Username has already been taken.',该邮箱地址已被注册:'Email address has already been taken.',注册失败:'Sign up failed.',邮箱或密码错误:'The email address or password is incorrect','登录失败次数过多，请15分钟后再次尝试':'You have entered incorrect passwords for too many times. Please try later or reset your password.','邮箱地址未验证，是否重新发送验证邮件？':"Your email address is not verified. Do you want to verify now?",'验证邮件已发送到您的邮箱，请完成邮箱验证（邮件到达可能需要一些时间，如果没有收到，请检查邮件垃圾箱）':"We have sent you an email to verify your account (it may take a few minutes to arrive). Please check your mailbox (also check your spam folder).",登录失败:'Sign in failed.'}),_lang||(document.title='Login - IWFASF');{let e=0,t=c$('tip'),s=t$('input'),r=i$('login');s[0].placeholder=_t('邮箱'),s[1].placeholder=_t('密码'),s[2].placeholder=_t('用户名(圈内名)'),t[0].text(_t('忘记密码？')),t[1].text(_t('注册'));let a=[_t('登录'),_t('注册')];r.firstChild.text(a[0]),css(s[2],{pointerEvents:'none',top:s[2].offsetTop-49+'px'}),t[0].style.transition='color 0.2s, opacity 0.2s',t[0].onclick=()=>{let e=s[0].value.trim();if(!e||!e.match(/[^@]+@.+\..+/))return o(s[0]);AV.User.requestPasswordReset(e).then(()=>{alert(_t('请求已发送，请检查您的邮箱'))},e=>{alert(205==e.code?_t('邮箱地址错误'):_t('发送失败'))})},t[1].onclick=function(){this.innerText=a[e],r.firstChild.text(a[e=1-e]),e?(css(t[0],{opacity:0,pointerEvents:'none'}),css(s[0],{marginBottom:0}),css(s[1],{marginBottom:'32px'}),css(s[2],{pointerEvents:'',opacity:1}),s[1].placeholder=_t('密码')+'(8~16'+_t('字符')+')'):(css(t[0],{opacity:1,pointerEvents:''}),css(s[0],{marginBottom:''}),css(s[1],{marginBottom:''}),css(s[2],{pointerEvents:'none',opacity:0}),s[1].placeholder=_t('密码'))};const o=e=>{css(e,{borderColor:'#f55',background:'#fee'}),e.oninput=function(){css(this,{borderColor:'',background:''})}};FASF.DB.init(),i$('navi').lastChild.hide(),r.reset=function(){this.on=!1,css(this,{background:'',pointerEvents:''})},r.onclick=function(){if(this.on)return;let t=s[0].value.trim(),r=s[1].value,a=s[2].value.trim();if(!t||!t.match(/[^@]+@.+\..+/))return o(s[0]);if(!r)return o(s[1]);if(e){if(r.length<8||r.length>16)return o(s[1]);if(!a)return o(s[2]);let e=new AV.User;e.setUsername(a),e.setPassword(r),e.setEmail(t),e.signUp().then(e=>{alert(_t('注册成功！')+_t('验证邮件已发送到您的邮箱，请完成邮箱验证（邮件到达可能需要一些时间，如果没有收到，请检查邮件垃圾箱）')),this.reset()},e=>{switch(e.code){case 202:alert(_t('该用户名已被注册'));break;case 203:alert(_t('该邮箱地址已被注册'));break;default:alert(_t('注册失败'))}this.reset()})}else AV.User.loginWithEmail(t,r).then(e=>{let t=doc.referrer;location.href=t.includes('iwfasf.com')&&!t.includes('user')?t:'/'},e=>{switch(e.code){case 211:case 210:alert(_t('邮箱或密码错误'));break;case 219:alert(_t('登录失败次数过多，请15分钟后再次尝试'));break;case 216:confirm(_t('邮箱地址未验证，是否重新发送验证邮件？'))&&AV.User.requestEmailVerify(t).then(()=>{alert(_t('验证邮件已发送到您的邮箱，请完成邮箱验证（邮件到达可能需要一些时间，如果没有收到，请检查邮件垃圾箱）'))},e=>{alert(205==e.code?_t('邮箱地址错误'):_t('发送失败'))});break;default:alert('登录失败')}this.reset()});this.on=!0,css(this,{background:'#abc',pointerEvents:'none'})}}