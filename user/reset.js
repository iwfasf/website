_m({'新密码(长度8~16)':'New Password (8~16 characters)',确认密码:'Confirm Password',重置:'Reset',密码重置失败:'',密码重置成功:'',服务器错误:'Server error'});{let t=t$('input'),r=doc.getElementById('login');t[0].placeholder=_t('新密码(长度8~16)'),t[1].placeholder=_t('确认密码'),r.firstChild.innerText=_t('重置');const e=t=>{css(t,{borderColor:'#f55',background:'#fee'}),t.oninput=function(){css(this,{borderColor:'',background:''})}};r.reset=function(){this.on=!1,css(this,{background:'',pointerEvents:''})},r.onclick=function(){let r=t[0].value;if(!r||r.length<8||r.length>16)return e(t[0]);if(t[1].value!==r)return e(t[1]);let o=location.search.match(/token=(\w*)/);o&&(o=o[1]),o&&($.jsonp({url:'https://api.iwfasf.com/1.1/resetPassword/'+o,data:{password:r},callbackParameter:'callback',cache:!1,success:t=>{t.error?($('#tip').html(_t('密码重置失败')+'<br/>Error: '+t.error),this.reset()):(alert(_t('密码重置成功')),location.pathname='/login')},error:()=>{$('#tip').html(_t('服务器错误')),this.reset()}}),this.on=!0,css(this,{background:'#abc',pointerEvents:'none'}))}}